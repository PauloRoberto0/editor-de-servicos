<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorator="layout">

<head>
    <title>Gerenciar Usuarios</title>
</head>

<body layout:fragment="corpo">

<span class="cabecalho-cor"></span>
<div id="wrapper">
    <header>
        <div>
            <a href="/editar">
                <h1>
                    <i class="fa fa-arrow-left"></i>
                    Editor de Serviços
                    <span class="nome-pagina">Lista usuários</span>
                </h1>
            </a>
        </div>
        <div class="metadados">
            <a id="novo-usuario" href="/editar/usuarios/usuario" class="button">
                <i class="fa fa-user-plus"></i>
                Novo Usuário
            </a>
        </div>

        <form id="logout" th:action="@{/editar/sair}" method="post">
            <button type="submit">&nbsp; Sair &nbsp;
                <i class="fa fa-sign-out"></i></button>
        </form>
    </header>

    <div id="lista-usuarios" style="padding-top: 100px">
        <table id="usuarios">
            <thead>
                <tr>
                    <th>Name</th>
                    <th style="width:20%;">Email</th>
                    <th>Papéis</th>
                    <th>Orgão</th>
                    <th>Situação</th>
                    <th style="width:7%"></th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="usuario : ${usuarios}">
                    <td th:text="${usuario.nome}"></td>
                    <td th:text="${usuario.emailPrimario}"></td>
                    <td th:text="${usuario.papel.nome}"></td>
                    <td th:if="${siorg.nomeDoOrgao(usuario.siorg) != null}" th:text="${siorg.nomeDoOrgao(usuario.siorg).orElse(new String())}"></td>
                    <td>
                        <span th:if="${usuario.habilitado == true}" class="habilitado">Habilitado</span>
                        <span th:if="${usuario.habilitado == false}" class="desabilitado">Desabilitado</span>
                    </td>
                    <td>
                        <form th:action="@{/editar/usuarios/usuario/{id}/editar(id=${usuario.id})}" method="post">
                            <button id="edicao-usuario" type="submit" class="editar">
                                <span>
                                    <i class="fa fa-pencil-square-o"></i>
                                </span>
                            </button>
                        </form>
                        <form th:action="@{/editar/usuarios/usuario/{id}/recuperar-senha(id=${usuario.id})}" method="post">
                            <button id="recuperar-senha-usuario" type="submit" class="recuperar-senha">
                                <span>
                                    <i class="fa fa-key"></i>
                                </span>
                            </button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>