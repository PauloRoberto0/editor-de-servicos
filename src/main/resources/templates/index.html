<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorator="layout">

<head>
    <title>Principal</title>
</head>

<body>
<section id="principal" class="auto-grid" role="main" layout:fragment="corpo">
    <form th:action="@{/servico/{id}(id=${servico.metadados.novo ? 'novo' : @slugify.slugify(servico.nome)})}"
          th:object="${servico}" method="post">

        <div th:replace="form/introducao :: #introducao"></div>
        <div th:replace="form/dados-principais :: #passo-1"></div>
        <div th:replace="form/situacao-servico :: #passo-2"></div>
        <div th:replace="form/etapas :: #passo-3"></div>
        <div th:replace="form/dados-complementares :: #passo-4"></div>

        <button id="salvar">
            <i class="fa fa-hdd-o"></i>&nbsp;
            Salvar
        </button>

        <button id="publicar">
            <i class="fa fa-paper-plane"></i>&nbsp;
            Publicar
        </button>

        <button class="cancel">
            <i class="fa fa-trash-o"></i>&nbsp;
            Descartar alterações
        </button>

        <span th:text="${'Versão ' + (servico.metadados.versao ?: 'ainda não salva')}"></span>
        <th:block th:if="*{metadados?.revisao}">
            <span th:text="${'revisão ' + #strings.substring(servico?.metadados?.revisao, 0, 6)}"></span>,
            <span th:text="${'por ' + servico?.metadados?.autor}"></span>,
            <span th:text="${'em ' + #dates.format(servico?.metadados?.horario, 'dd/MMM/yyyy HH:mm')}"></span>
        </th:block>
    </form>
</section>
</body>
</html>
