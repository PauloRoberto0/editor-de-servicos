<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorator="layout">

<head>
    <title>Acessar o Editor de Serviços</title>
</head>

<body layout:fragment="corpo">

<span class="cabecalho-cor"></span>
<div id="wrapper">
    <header>
        <div>
            <a href="/editar">
                <h1>Editor de Serviços</h1>
            </a>
        </div>
        <div class="metadados">&nbsp;</div>
        <span></span>
        <form id="logout" th:action="@{/editar/sair}" method="post">
            <button type="submit">Sair</button>
        </form>
    </header>

    <form id="cadastro" th:action="@{/editar/usuarios/usuario}" th:object="${formularioUsuario}" method="post">
        <fieldset>
            <p th:if="${param.sucesso}" class="info">
                <i class="fa fa-info"></i>&nbsp;
                Cadastro realizado com sucesso
            </p>

            <div th:if="${#fields.hasAnyErrors()}" class="erro">
                <p th:each="err : ${#fields.allErrors()}" th:text="${err}">...</p>
            </div>

            <h3 for="nome_completo">Nome Completo</h3>
            <input id="nome_completo" name="nome" type="text" th:value="*{nome}" required="required"
                   th:class="${#fields.hasErrors('nome')}? erroCampo" />

            <h3 for="cpf">CPF</h3>
            <input id="cpf" name="cpf" type="text" th:value="*{cpf}" placeholder="___.___.___-__" required="required" autofocus="true"
                   th:class="${#fields.hasErrors('cpf')}? erroCampo"/>

            <h3 for="email_primario">Email Primário</h3>
            <input id="email_primario" name="emailPrimario" th:value="*{emailPrimario}" type="email"
                   placeholder="email@instituicional.gov.br" th:class="${#fields.hasErrors('emailPrimario')}? erroCampo"/>

            <h3 for="email_secundario">Email Secundário</h3>
            <input id="email_secundario" name="emailSecundario" th:value="*{emailSecundario}" type="email"
                   placeholder="email@secundario.org" th:class="${#fields.hasErrors('emailSecundario')}? erroCampo"/>

            <h3 for="senha">Senha</h3>
            <input id="senha" name="camposSenha.senha" type="password" placeholder="Senha" required="required"
                   th:class="${#fields.hasErrors('camposSenha')}? erroCampo"/>

            <h3 for="confirmar_senha">Confirme a Senha</h3>
            <input id="confirmar_senha" name="camposSenha.confirmacaoSenha" type="password" placeholder="Senha" required="required"
                   th:class="${#fields.hasErrors('camposSenha')}? erroCampo"/>

            <div id="siorg-select"></div>

            <h3 for="servidor">É servidor?</h3>
            <input id="servidor" name="camposServidor.servidor" th:field="*{camposServidor.servidor}" type="checkbox"
                   th:class="${#fields.hasErrors('camposServidor')}? erroCampo"/>

            <h3 for="siape">SIAPE</h3>
            <input id="siape" name="camposServidor.siape" type="text" th:value="*{camposServidor.siape}" placeholder="siape"
                   th:class="${#fields.hasErrors('camposServidor')}? erroCampo"/>

            <h3 for="papel">Papel</h3>
            <select id="papel" name="papelId" th:field="*{papelId}">
                <option th:each="papel : ${papeis}" th:value="${papel.id}" th:text="${papel.nome}"></option>
            </select>

            <button type="submit">
                Cadastrar
            </button>
        </fieldset>
    </form>
</div>

<script src="/editar/assets/vendor.js"></script>
<script src="/editar/assets/app.js"></script>
<script th:inline="javascript">
    var siorgInicial = /*[[${formularioUsuario.siorg}]]*/ null;
    require('usuarios/siorg')(m, siorgInicial, 'siorg-select');
    require('usuarios/cpf-mask')('cpf')
</script>
</body>
</html>
