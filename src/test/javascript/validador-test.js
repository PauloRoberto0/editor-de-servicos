'use strict';

var modelos = require('modelos');
var validador = require('validador');

describe('validação >', function () {
  describe('servico >', function () {
    var validadorServico;

    beforeEach(function () {
      validadorServico = new m.validator(validador);
    });

    it('deve ter nome válido', function () {
      validadorServico.validate(new modelos.Servico({
        nome: 'nome de teste'
      }));

      expect(validadorServico.hasErrors()).toBe(0);
    });

    it('deve obrigar ter nome', function () {
      validadorServico.validate(new modelos.Servico());

      expect(validadorServico.hasErrors()).toBe(1);
      expect(validadorServico.hasError('nome')).toBe('nome-obrigatorio');
    });

    it('deve impedir salvamento de nome > 150', function () {
      validadorServico.validate(new modelos.Servico({
        nome: 'nome maior que 150????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????'
      }));

      expect(validadorServico.hasErrors()).toBe(1);
      expect(validadorServico.hasError('nome')).toBe('nome-max-150');
    });

  });

});
